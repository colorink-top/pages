function processImage(t){const e=document.querySelector(".canvas"),o=e.getContext("2d");e.width=t.naturalWidth,e.height=t.naturalHeight,o.drawImage(t,0,0);const a=o.getImageData(0,0,e.width,e.height),n=a.data;for(let t=0;t<n.length;t+=4)255===n[t]&&255===n[t+1]&&255===n[t+2]&&(n[t+3]=0);return o.putImageData(a,0,0),e.toDataURL()}function convertAlphaImage(t){return new Promise((function(e,o){const a=document.createElement("img");a.src=t,a.onload=()=>{const t=processImage(a);e(t)}}))}window.joppInit=async function(t={}){const{frameInfo:e,documentInfo:o,pdfInfo:a}=t,{marginTop:n,marginRight:i,marginBottom:c,marginLeft:r,width:m,height:g}=a||{},d=document.querySelector(".dom-image"),h=await domtoimage.toBlob(d,{bgcolor:"black",style:{width:"100%",height:"100%"}}),u=window.URL.createObjectURL(h);d.remove();await convertAlphaImage(u)};