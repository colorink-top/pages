import{demoData}from"../../demo-data.js";function getRandom(e,t){const o=Math.random(),n=t-e;return Math.round(n*o)+e}window.joppInit=async(e=demoData)=>{const{pdfInfo:t,documentInfo:o}=e,{pages:n,width:r,height:a,margin:s}=t,c=n.filter((e=>"toc"===e.type)),p=n.filter((e=>"content"===e.type)),d=(c.length,p.length),i=document.documentElement;i.style.setProperty("--marginTop",s.top+"px"),i.style.setProperty("--marginRight",s.right+"px"),i.style.setProperty("--marginBottom",s.bottom+"px"),i.style.setProperty("--marginLeft",s.left+"px"),i.style.setProperty("--width",r+"px"),i.style.setProperty("--height",a+"px");const m=document.querySelector(".template");m.remove();const l=document.createElement("div");l.classList.add(".pages-container");const y=new Date;let g=0;n.forEach(((e,t)=>{const n=m.cloneNode(!0);switch(n.className="page-container",e.type){case"toc":n.innerHTML="",n.classList.add("toc-page-container"),l.append(n);break;case"content":{g++,n.classList.add("content-page-container");n.querySelector(".header .section").innerText=e?.section1||"";const t=n.querySelector(".footer .hostname a");t.innerText=o.hostname,t.href=o.url;n.querySelector(".footer .page-num").innerText=`${g}/${d}`;n.querySelector(".footer .date").innerText=y.toString(),l.append(n);const r=n.querySelector(".stamp-container"),a=n.querySelector(".stamp");g==d?r.remove():(a.setAttribute("src",`./imgs/stamp_${getRandom(1,8)}.svg`),r.style.setProperty("--stampX",getRandom(1,100)+"%"),r.style.setProperty("--stampY",getRandom(-40,-20)+"px"),r.style.setProperty("--stampDeg",getRandom(0,360)+"deg"));break}default:n.classList.add("other-page-container"),n.innerHTML="",l.append(n)}})),document.body.append(l)};