const defaultPreviewLetter="abcdefghijklmn...hello Just One Page PDF...";function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const getTrustedHTMLFn=e=>trustedTypes.createPolicy("forceInner",{createHTML:e=>e}).createHTML(e);export const selectLocalFontFn=async e=>{e=e||defaultPreviewLetter;const n=(await window.queryLocalFonts()).map((e=>e.family)),t=[...new Set(n)].map((e=>{const n=escapeHTML(e);return`<option value="${n}">${n}</option>`})),o=document.body;o.querySelectorAll("dialog").forEach((e=>e.remove()));const c=document.createElement("dialog");c.innerHTML=getTrustedHTMLFn(`\n            <div class="select-fonts-dialog-container dialog-container">\n              <div class="select-fonts-container content-container">\n                <div class="select-fonts-list">\n                <select class="select-fonts-list-selector" name="systemFont" size=10>\n                  ${t.join("")}\n                </select>\n                </div>\n                <iframe class="font-preview-iframe" frameborder="0"></iframe>\n              </div>\n              <div class="select-fonts-btns footer-btns">\n                <div class="right-footer-btns">\n                  <button class="cancel-btn btn">cancel</button>\n                  <button class="ok-btn btn">ok</button>\n                </div>\n              </div>\n            </div>\n          `),o.append(c),c.showModal(),c.oncancel=e=>{e.preventDefault(),e.stopPropagation()};const l=c.querySelector(".select-fonts-list-selector");l.onchange=()=>{const e=l.value;s.contentDocument.querySelector(".font-style").innerHTML=`body{\n      font-family: '${e}', serif;\n    }`};const s=c.querySelector(".font-preview-iframe");return s.srcdoc=`\n          <!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="UTF-8">\n            <title></title>\n            <style>\n*{\n  box-sizing: border-box;\n}\nhtml,body{\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.font-preview-content{\n    font-size: 20px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n    width: 100%;\n    overflow: auto;\n    padding: 0;\n    margin: 0;\n}\n            </style>\n            <style class="font-style"></style>\n          </head>\n          <body>\n             <div class="font-preview-content" contenteditable>\n                  ${e}\n             </div>\n          </body>\n          </html>\n          `,new Promise(((e,n)=>{c.querySelector(".cancel-btn").onclick=()=>{c.remove(),e()},c.querySelector(".ok-btn").onclick=()=>{let n="";l.value&&(n=l.value),c.remove(),e(n)}}))};