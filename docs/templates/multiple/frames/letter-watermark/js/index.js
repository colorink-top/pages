import{demoData}from"../../demo-data.js";import{defaultWatermarkOptions,getOptionsFn}from"./options.js";window.joppInit=async(e=demoData)=>{const{pdfInfo:t,documentInfo:r,templateInfo:o={}}=e,{pages:n,width:a,height:i,margin:s}=t,l=n.filter((e=>"toc"===e.type)),p=n.filter((e=>"content"===e.type)),c=(l.length,p.length),y=document.documentElement;y.style.setProperty("--marginTop",s.top+"px"),y.style.setProperty("--marginRight",s.right+"px"),y.style.setProperty("--marginBottom",s.bottom+"px"),y.style.setProperty("--marginLeft",s.left+"px"),y.style.setProperty("--width",a+"px"),y.style.setProperty("--height",i+"px"),document.querySelectorAll(".pages-container").forEach((e=>e.remove()));const d=document.querySelector(".template");d.style.display="none";const m=document.createElement("div");m.classList.add("pages-container");const g=new Date;let h=0;const u=Object.assign({},defaultWatermarkOptions,getOptionsFn(),o.options);n.forEach(((e,t)=>{const o=d.cloneNode(!0);switch(o.style.removeProperty("display"),o.className="page-container",e.type){case"toc":o.innerHTML="",o.classList.add("toc-page-container"),m.append(o);break;case"content":{h++,o.classList.add("content-page-container");o.querySelector(".header .section").innerText=e?.section1||"";const t=o.querySelector(".footer .hostname a");t.innerText=r.hostname,t.href=r.url;o.querySelector(".footer .page-num").innerText=`${h}/${c}`;o.querySelector(".footer .date").innerText=g.toString();o.querySelector(".created-with").style.visibility=u.hideSaveDate?"hidden":"visible";o.querySelector(".header").style.visibility=u.hideHeader?"hidden":"visible";o.querySelector(".footer").style.visibility=u.hideFooter?"hidden":"visible",m.append(o);const n=o.querySelector(".letter-watermark");n.innerText=u.letter,n.style.setProperty("--watermarkFontFamily",u.fontFamily),n.style.setProperty("--watermarkFontSize",u.fontSize+"px"),n.style.setProperty("--watermarkLetterSpacing",u.letterSpacing+"px"),n.style.setProperty("--watermarkOpacity",u.opacity),n.style.setProperty("--watermarkColor",u.color),n.style.setProperty("--watermarkAngle",u.angle+"deg"),n.style.setProperty("--watermarkX",u.x+"%"),n.style.setProperty("--watermarkY",u.y+"%");break}default:o.classList.add("other-page-container"),o.innerHTML="",m.append(o)}})),document.body.append(m)};const url=new URL(document.location.href),joppPreview=url.searchParams.get("joppPreview");joppPreview&&import("./preview/index.js");