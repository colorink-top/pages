import{demoData}from"../../../demo-data.js";import{defaultImageOptions,getOptionsFn,getImageURLFn}from"./options.js";_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};const getArticleInfo=(e=demoData)=>{let t=e.documentInfo.title,o="",n="";if(e?.articleContext?.articleInfo){const{articleInfo:i}=e.articleContext;t=i.title||t,o=i.subtitle||"",n=i.author||n}return{...e.documentInfo,title:t,subtitle:o,author:n}};window.joppInit=async e=>{const{documentInfo:t,templateInfo:o={}}=e,n=(getArticleInfo(e),Object.assign({},defaultImageOptions,getOptionsFn(),o.options)),i=await getImageURLFn(n.id),r=document.querySelector(".jopp-doc-detail-table");n.hideDetail?r.style.display="none":r.style.display="";const l=document.querySelector(".jopp-table-title"),a=document.querySelector(".jopp-table-save-date"),c=document.querySelector(".jopp-table-link>a");l.innerText=t.title,a.innerText=(new Date).toLocaleString(),c.href=t.url,c.innerText=t.url;document.querySelector(".image-cover").src=i||"../mind.svg";document.documentElement.style.setProperty("--color",n.color)};const url=new URL(document.location.href),joppPreview=url.searchParams.get("joppPreview");joppPreview&&import("./preview/index.js");