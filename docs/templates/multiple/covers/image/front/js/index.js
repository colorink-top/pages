import{demoData}from"../../../demo-data.js";import{defaultImageOptions,getOptionsFn,getImageURLFn}from"./options.js";_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};const getArticleInfo=(e=demoData)=>{let t=e.documentInfo.title,o="",n="";if(e?.articleContext?.articleInfo){const{articleInfo:r}=e.articleContext;t=r.title||t,o=r.subtitle||"",n=r.author||n}return{...e.documentInfo,title:t,subtitle:o,author:n}};window.joppInit=async e=>{const{documentInfo:t,templateInfo:o={}}=e,{url:n,origin:r}=t,i=getArticleInfo(e),l=Object.assign({},defaultImageOptions,getOptionsFn(),o.options),a=await getImageURLFn(l.id),c=_.template(l.title||"")(i),s=_.template(l.subtitle||"")(i),m=_.template(l.author||"")(i),p=document.documentElement,u=document.querySelector(".jopp-doc-title"),d=document.querySelector(".jopp-doc-subtitle"),g=document.querySelector(".jopp-doc-author"),f=document.querySelector(".image-cover");if(p.style.setProperty("--color",l.color),f.src=a||"../mind.svg",u.innerText=c,l.strokeTitle?u.classList.add("stroke-text"):u.classList.remove("stroke-text"),d.innerHTML="","{{url}}"===s){const e=document.createElement("a");e.href=n,e.innerText=r,d.append(e)}else d.innerText=s;g.innerText=m};const url=new URL(document.location.href),joppPreview=url.searchParams.get("joppPreview");joppPreview&&import("./preview/index.js");